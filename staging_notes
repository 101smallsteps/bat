
setup machine
    https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-22-04
    https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-22-04
    https://www.digitalocean.com/community/tutorials/how-to-set-up-django-with-postgres-nginx-and-gunicorn-on-ubuntu

    root - ubuntu

    create user with sudo access
    adduser aarth
    ufw allow https
    ufw allow http

     UFW
        https://www.digitalocean.com/community/tutorials/ufw-essentials-common-firewall-rules-and-commands

     docker setup
        systemctl status docker
        sudo systemctl restart docker
        docker network ls
        docker network inspect bridge
        sudo systemctl restart docker.service
        journalctl -u docker.service

setup machine 1
    loing to machine 1
    sudo login aarth
    aarth123

    git clone https://github.com/101smallsteps/bat.git

    docker-compose -f docker-compose.staging.yml up -d --build bat_backend_1

    note the ip :

setup machine 2
    docker-compose -f docker-compose.staging.yml up -d --build bat_backend_2
    docker-compose -f docker-compose.staging.yml exec bat_backend_2 python manage.py migrate --noinput
    docker-compose -f docker-compose.staging.yml exec bat_backend_2 python manage.py collectstatic --no-input --clear

nginx-proxy setup
docker run -it --rm -p 80:80 --name certbot \
         -v "/etc/letsencrypt:/etc/letsencrypt" \
         -v "/var/lib/letsencrypt:/var/lib/letsencrypt" \
         certbot/certbot certonly --standalone --staging -d bat4all.com

    Requesting a certificate for bat4all.com

    Successfully received certificate.
    Certificate is saved at: /etc/letsencrypt/live/bat4all.com/fullchain.pem
    Key is saved at:         /etc/letsencrypt/live/bat4all.com/privkey.pem
    This certificate expires on 2024-06-10.
    These files will be updated when the certificate renews.

    NEXT STEPS:
    - The certificate will need to be renewed before it expires. Certbot can automatically renew the certificate in the background, but you may need to take steps to enable that functionality. See https://certbot.org/renewal-setup for instructions.

    docker-compose -f docker-compose.staging.yml up -d nginx

